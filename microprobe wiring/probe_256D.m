%first column = channel number on probe.  Convention is ch. 1 is at top left of PCB
%and number wrap around in counter-clockwise fashion.

%second column = x coordinate, horizontal distance to reference electrode in microns.  Convention is
%for reference electrode to be at bottom left corner of array when array
%points up.

%third column = y coordinate.  Convention is for this coordinate to be zero
%unless the probe is 3D.

%forth column = z coordinate, vertical distance to reference electrode in microns.  Convention is
%for reference electrode to be at bottom left corner of array when array
%points up.

%fifth column = shaft number.  Convention is for shaft 1 to be the
%right-most shaft when array points up.

probewiring=[

1	245	0	190	7
2	245	0	163.75	7
3	245	0	137.5	7
4	245	0	110	7
5	245	0	82.5	7
6	245	0	55	7
7	245	0	27.5	7
8	245	0	0	7
9	245	0	217.5	7
10	242.5	0	245	7
11	222.5	0	176.25	7
12	222.5	0	151.25	7
13	222.5	0	123.75	7
14	222.5	0	96.25	7
15	222.5	0	68.75	7
16	222.5	0	41.25	7
17	222.5	0	13.75	7
18	222.5	0	-13.75	7
19	222.5	0	203.75	7
20	222.5	0	231.25	7
21	222.5	0	258.75	7
22	222.5	0	286.25	7
23	202.5	0	245	7
24	200	0	217.5	7
25	200	0	0	7
26	200	0	27.5	7
27	200	0	55	7
28	200	0	82.5	7
29	200	0	110	7
30	200	0	137.5	7
31	200	0	163.75	7
32	200	0	190	7
33	45	0	190	8
34	45	0	163.75	8
35	45	0	137.5	8
36	45	0	110	8
37	45	0	82.5	8
38	45	0	55	8
39	45	0	27.5	8
40	45	0	0	8
41	45	0	217.5	8
42	42.5	0	245	8
43	22.5	0	176.25	8
44	22.5	0	151.25	8
45	22.5	0	123.75	8
46	22.5	0	96.25	8
47	22.5	0	68.75	8
48	22.5	0	41.25	8
49	22.5	0	13.75	8
50	22.5	0	-13.75	8
51	22.5	0	203.75	8
52	22.5	0	231.25	8
53	22.5	0	258.75	8
54	22.5	0	286.25	8
55	2.5	0	245	8
56	0	0	217.5	8
57	0	0	0	8
58	0	0	27.5	8
59	0	0	55	8
60	0	0	82.5	8
61	0	0	110	8
62	0	0	137.5	8
63	0	0	163.75	8
64	0	0	190	8
65	400	0	190	6
66	400	0	163.75	6
67	400	0	137.5	6
68	400	0	110	6
69	400	0	82.5	6
70	400	0	55	6
71	400	0	27.5	6
72	400	0	0	6
73	400	0	217.5	6
74	402.5	0	245	6
75	422.5	0	286.25	6
76	422.5	0	258.75	6
77	422.5	0	231.25	6
78	422.5	0	203.75	6
79	422.5	0	-13.75	6
80	422.5	0	13.75	6
81	422.5	0	41.25	6
82	422.5	0	68.75	6
83	422.5	0	96.25	6
84	422.5	0	123.75	6
85	422.5	0	151.25	6
86	422.5	0	176.25	6
87	442.5	0	245	6
88	445	0	217.5	6
89	445	0	0	6
90	445	0	27.5	6
91	445	0	55	6
92	445	0	82.5	6
93	445	0	110	6
94	445	0	137.5	6
95	445	0	163.75	6
96	445	0	190	6
97	600	0	190	5
98	600	0	163.75	5
99	600	0	137.5	5
100	600	0	110	5
101	600	0	82.5	5
102	600	0	55	5
103	600	0	27.5	5
104	600	0	0	5
105	600	0	217.5	5
106	602.5	0	245	5
107	622.5	0	286.25	5
108	622.5	0	258.75	5
109	622.5	0	231.25	5
110	622.5	0	203.75	5
111	622.5	0	-13.75	5
112	622.5	0	13.75	5
113	622.5	0	41.25	5
114	622.5	0	68.75	5
115	622.5	0	96.25	5
116	622.5	0	123.75	5
117	622.5	0	151.25	5
118	622.5	0	176.25	5
119	642.5	0	245	5
120	645	0	217.5	5
121	645	0	0	5
122	645	0	27.5	5
123	645	0	55	5
124	645	0	82.5	5
125	645	0	110	5
126	645	0	137.5	5
127	645	0	163.75	5
128	645	0	190	5
129	800	0	290	4
130	800	0	263.75	4
131	800	0	237.5	4
132	800	0	210	4
133	800	0	182.5	4
134	800	0	155	4
135	800	0	127.5	4
136	800	0	100	4
137	800	0	317.5	4
138	802.5	0	345	4
139	822.5	0	386.25	4
140	822.5	0	358.75	4
141	822.5	0	331.25	4
142	822.5	0	303.75	4
143	822.5	0	86.25	4
144	822.5	0	113.75	4
145	822.5	0	141.25	4
146	822.5	0	168.75	4
147	822.5	0	196.25	4
148	822.5	0	223.75	4
149	822.5	0	251.25	4
150	822.5	0	276.25	4
151	842.5	0	345	4
152	845	0	317.5	4
153	845	0	100	4
154	845	0	127.5	4
155	845	0	155	4
156	845	0	182.5	4
157	845	0	210	4
158	845	0	237.5	4
159	845	0	263.75	4
160	845	0	290	4
161	1000	0	390	3
162	1000	0	363.75	3
163	1000	0	337.5	3
164	1000	0	310	3
165	1000	0	282.5	3
166	1000	0	255	3
167	1000	0	227.5	3
168	1000	0	200	3
169	1000	0	417.5	3
170	1002.5	0	445	3
171	1022.5	0	486.25	3
172	1022.5	0	458.75	3
173	1022.5	0	431.25	3
174	1022.5	0	403.75	3
175	1022.5	0	186.25	3
176	1022.5	0	213.75	3
177	1022.5	0	241.25	3
178	1022.5	0	268.75	3
179	1022.5	0	296.25	3
180	1022.5	0	323.75	3
181	1022.5	0	351.25	3
182	1022.5	0	376.25	3
183	1042.5	0	445	3
184	1045	0	417.5	3
185	1045	0	200	3
186	1045	0	227.5	3
187	1045	0	255	3
188	1045	0	282.5	3
189	1045	0	310	3
190	1045	0	337.5	3
191	1045	0	363.75	3
192	1045	0	390	3
193	1445	0	590	1
194	1445	0	563.75	1
195	1445	0	537.5	1
196	1445	0	510	1
197	1445	0	482.5	1
198	1445	0	455	1
199	1445	0	427.5	1
200	1445	0	400	1
201	1445	0	617.5	1
202	1442.5	0	645	1
203	1422.5	0	576.25	1
204	1422.5	0	551.25	1
205	1422.5	0	523.75	1
206	1422.5	0	496.25	1
207	1422.5	0	468.75	1
208	1422.5	0	441.25	1
209	1422.5	0	413.75	1
210	1422.5	0	386.25	1
211	1422.5	0	603.75	1
212	1422.5	0	631.25	1
213	1422.5	0	658.75	1
214	1422.5	0	686.25	1
215	1402.5	0	645	1
216	1400	0	617.5	1
217	1400	0	400	1
218	1400	0	427.5	1
219	1400	0	455	1
220	1400	0	482.5	1
221	1400	0	510	1
222	1400	0	537.5	1
223	1400	0	563.75	1
224	1400	0	590	1
225	1245	0	490	2
226	1245	0	463.75	2
227	1245	0	437.5	2
228	1245	0	410	2
229	1245	0	382.5	2
230	1245	0	355	2
231	1245	0	327.5	2
232	1245	0	300	2
233	1245	0	517.5	2
234	1242.5	0	545	2
235	1222.5	0	476.25	2
236	1222.5	0	451.25	2
237	1222.5	0	423.75	2
238	1222.5	0	396.25	2
239	1222.5	0	368.75	2
240	1222.5	0	341.25	2
241	1222.5	0	313.75	2
242	1222.5	0	286.25	2
243	1222.5	0	503.75	2
244	1222.5	0	531.25	2
245	1222.5	0	558.75	2
246	1222.5	0	586.25	2
247	1202.5	0	545	2
248	1200	0	517.5	2
249	1200	0	300	2
250	1200	0	327.5	2
251	1200	0	355	2
252	1200	0	382.5	2
253	1200	0	410	2
254	1200	0	437.5	2
255	1200	0	463.75	2
256	1200	0	490	2


];


tipelectrode=21;    %nearest tip-electrode vertical distance in microns.

connector_position='top';

find_probewiring




s=[];
s.channels=probewiring(:,1);
s.x=probewiring(:,2);   %the reference electrode is always the top right channel when the probes are pointing up.
s.y=probewiring(:,3);
s.z=probewiring(:,4); s.z=s.z-min(s.z);
s.shaft=probewiring(:,5);
s.tipelectrode=tipelectrode;

if strcmp(headstage_source,'Intan')
    s.channels=s.channels-1;
end

%To plot the labeled channels:
figure(2)
clf
plot(s.x,s.z,'sqr', 'MarkerSize',11)
hold on
for i=1:size(probewiring,1)
text(s.x(i)-5,s.z(i),num2str(s.channels(i)),'FontSize',9)
end
axis([min(s.x)-50 max(s.x)+50 min(s.z)-50 max(s.z)+50])
axis equal
set(gca,'FontSize',10,'TickDir','out')
