%first column = channel number on probe.  Convention is ch. 1 is at top left of PCB
%and number wrap around in counter-clockwise fashion.

%second column = x coordinate, horizontal distance to reference electrode in microns.  Convention is
%for reference electrode to be at bottom left corner of array when array
%points up.

%third column = y coordinate.  Convention is for this coordinate to be zero
%unless the probe is 3D.

%forth column = z coordinate, vertical distance to reference electrode in microns.  Convention is
%for reference electrode to be at bottom left corner of array when array
%points up.

%fifth column = shaft number.  Convention is for shaft 1 to be the
%right-most shaft when array points up.

probewiring=[
1	200	0	3100	7
2	200	0	2900	7
3	200	0	2700	7
4	200	0	2500	7
5	200	0	2300	7
6	200	0	2100	7
7	200	0	1900	7
8	200	0	1700	7
9	200	0	1500	7
10	200	0	1300	7
11	200	0	1100	7
12	200	0	900	7
13	200	0	700	7
14	200	0	500	7
15	200	0	300	7
16	200	0	100	7
17	200	0	0	7
18	200	0	200	7
19	200	0	400	7
20	200	0	600	7
21	200	0	800	7
22	200	0	1000	7
23	200	0	1200	7
24	200	0	1400	7
25	200	0	1600	7
26	200	0	1800	7
27	200	0	2000	7
28	200	0	2200	7
29	200	0	2400	7
30	200	0	2600	7
31	200	0	2800	7
32	200	0	3000	7
33	0	0	3100	8
34	0	0	2900	8
35	0	0	2700	8
36	0	0	2500	8
37	0	0	2300	8
38	0	0	2100	8
39	0	0	1900	8
40	0	0	1700	8
41	0	0	1500	8
42	0	0	1300	8
43	0	0	1100	8
44	0	0	900	8
45	0	0	700	8
46	0	0	500	8
47	0	0	300	8
48	0	0	100	8
49	0	0	0	8
50	0	0	200	8
51	0	0	400	8
52	0	0	600	8
53	0	0	800	8
54	0	0	1000	8
55	0	0	1200	8
56	0	0	1400	8
57	0	0	1600	8
58	0	0	1800	8
59	0	0	2000	8
60	0	0	2200	8
61	0	0	2400	8
62	0	0	2600	8
63	0	0	2800	8
64	0	0	3000	8
65	400	0	3000	6
66	400	0	2800	6
67	400	0	2600	6
68	400	0	2400	6
69	400	0	2200	6
70	400	0	2000	6
71	400	0	1800	6
72	400	0	1600	6
73	400	0	1400	6
74	400	0	1200	6
75	400	0	1000	6
76	400	0	800	6
77	400	0	600	6
78	400	0	400	6
79	400	0	200	6
80	400	0	0	6
81	400	0	100	6
82	400	0	300	6
83	400	0	500	6
84	400	0	700	6
85	400	0	900	6
86	400	0	1100	6
87	400	0	1300	6
88	400	0	1500	6
89	400	0	1700	6
90	400	0	1900	6
91	400	0	2100	6
92	400	0	2300	6
93	400	0	2500	6
94	400	0	2700	6
95	400	0	2900	6
96	400	0	3100	6
97	600	0	3000	5
98	600	0	2800	5
99	600	0	2600	5
100	600	0	2400	5
101	600	0	2200	5
102	600	0	2000	5
103	600	0	1800	5
104	600	0	1600	5
105	600	0	1400	5
106	600	0	1200	5
107	600	0	1000	5
108	600	0	800	5
109	600	0	600	5
110	600	0	400	5
111	600	0	200	5
112	600	0	0	5
113	600	0	100	5
114	600	0	300	5
115	600	0	500	5
116	600	0	700	5
117	600	0	900	5
118	600	0	1100	5
119	600	0	1300	5
120	600	0	1500	5
121	600	0	1700	5
122	600	0	1900	5
123	600	0	2100	5
124	600	0	2300	5
125	600	0	2500	5
126	600	0	2700	5
127	600	0	2900	5
128	600	0	3100	5
129	800	0	3000	4
130	800	0	2800	4
131	800	0	2600	4
132	800	0	2400	4
133	800	0	2200	4
134	800	0	2000	4
135	800	0	1800	4
136	800	0	1600	4
137	800	0	1400	4
138	800	0	1200	4
139	800	0	1000	4
140	800	0	800	4
141	800	0	600	4
142	800	0	400	4
143	800	0	200	4
144	800	0	0	4
145	800	0	100	4
146	800	0	300	4
147	800	0	500	4
148	800	0	700	4
149	800	0	900	4
150	800	0	1100	4
151	800	0	1300	4
152	800	0	1500	4
153	800	0	1700	4
154	800	0	1900	4
155	800	0	2100	4
156	800	0	2300	4
157	800	0	2500	4
158	800	0	2700	4
159	800	0	2900	4
160	800	0	3100	4
161	1000	0	3000	3
162	1000	0	2800	3
163	1000	0	2600	3
164	1000	0	2400	3
165	1000	0	2200	3
166	1000	0	2000	3
167	1000	0	1800	3
168	1000	0	1600	3
169	1000	0	1400	3
170	1000	0	1200	3
171	1000	0	1000	3
172	1000	0	800	3
173	1000	0	600	3
174	1000	0	400	3
175	1000	0	200	3
176	1000	0	0	3
177	1000	0	100	3
178	1000	0	300	3
179	1000	0	500	3
180	1000	0	700	3
181	1000	0	900	3
182	1000	0	1100	3
183	1000	0	1300	3
184	1000	0	1500	3
185	1000	0	1700	3
186	1000	0	1900	3
187	1000	0	2100	3
188	1000	0	2300	3
189	1000	0	2500	3
190	1000	0	2700	3
191	1000	0	2900	3
192	1000	0	3100	3
193	1400	0	3100	1
194	1400	0	2900	1
195	1400	0	2700	1
196	1400	0	2500	1
197	1400	0	2300	1
198	1400	0	2100	1
199	1400	0	1900	1
200	1400	0	1700	1
201	1400	0	1500	1
202	1400	0	1300	1
203	1400	0	1100	1
204	1400	0	900	1
205	1400	0	700	1
206	1400	0	500	1
207	1400	0	300	1
208	1400	0	100	1
209	1400	0	0	1
210	1400	0	200	1
211	1400	0	400	1
212	1400	0	600	1
213	1400	0	800	1
214	1400	0	1000	1
215	1400	0	1200	1
216	1400	0	1400	1
217	1400	0	1600	1
218	1400	0	1800	1
219	1400	0	2000	1
220	1400	0	2200	1
221	1400	0	2400	1
222	1400	0	2600	1
223	1400	0	2800	1
224	1400	0	3000	1
225	1200	0	3100	2
226	1200	0	2900	2
227	1200	0	2700	2
228	1200	0	2500	2
229	1200	0	2300	2
230	1200	0	2100	2
231	1200	0	1900	2
232	1200	0	1700	2
233	1200	0	1500	2
234	1200	0	1300	2
235	1200	0	1100	2
236	1200	0	900	2
237	1200	0	700	2
238	1200	0	500	2
239	1200	0	300	2
240	1200	0	100	2
241	1200	0	0	2
242	1200	0	200	2
243	1200	0	400	2
244	1200	0	600	2
245	1200	0	800	2
246	1200	0	1000	2
247	1200	0	1200	2
248	1200	0	1400	2
249	1200	0	1600	2
250	1200	0	1800	2
251	1200	0	2000	2
252	1200	0	2200	2
253	1200	0	2400	2
254	1200	0	2600	2
255	1200	0	2800	2
256	1200	0	3000	2
];


tipelectrode=30;    %nearest tip-electrode vertical distance in microns.

connector_position='bottom';

find_probewiring



s=[];
s.channels=probewiring(:,1);
s.x=probewiring(:,2);   %the reference electrode is always the top right channel when the probes are pointing up.
s.y=probewiring(:,3);
s.z=probewiring(:,4); s.z=s.z-min(s.z);
s.shaft=probewiring(:,5);
s.tipelectrode=tipelectrode;

if strcmp(headstage_source,'Intan')
    s.channels=s.channels-1;
end

%To plot the labeled channels:
figure(2)
clf
plot(s.x,s.z,'sqr', 'MarkerSize',11)
hold on
for i=1:size(probewiring,1)
text(s.x(i)-5,s.z(i),num2str(s.channels(i)),'FontSize',9)
end
axis([min(s.x)-50 max(s.x)+50 min(s.z)-50 max(s.z)+50])
axis equal
set(gca,'FontSize',10,'TickDir','out')
